# Commands to update and push changes to the homebrew-tap repository for Chromeless v5.0.0

# SHA256 hash options:
# 
# For the simple placeholder DMG (462 KB):
# 07bf2813a1e19f9018225843ed123cf18c2c7f89d7b40460645519e4904e46cd
#
# For the full Chromeless application DMG (184 MB):
# 42179bdfa67d80b1a4843a599a1e3fa0fd7427f9bf90038c82c8f6f72175c946

# Clone the homebrew tap repository (if needed)
cd ~/workspace
git clone https://github.com/jonathanpberger/homebrew-chromeless.git
cd homebrew-chromeless

# Update the formula file (create if it doesn't exist)
mkdir -p Casks
cat > Casks/chromeless.rb << 'EOF'
cask "chromeless" do
  version "5.0.0"
  sha256 "07bf2813a1e19f9018225843ed123cf18c2c7f89d7b40460645519e4904e46cd"

  url "https://github.com/jonathanpberger/chromeless/releases/download/v#{version}/Chromeless-#{version}-universal.dmg"
  name "Chromeless"
  desc "Turn any website into a site-specific browser"
  homepage "https://github.com/jonathanpberger/chromeless"

  auto_updates true
  depends_on macos: ">= 10.13"

  app "Chromeless.app"

  zap trash: [
    "~/Library/Application Support/Chromeless",
    "~/Library/Caches/com.webcatalog.chromeless",
    "~/Library/Preferences/com.webcatalog.chromeless.plist",
  ]
end
EOF

# Commit and push
git add Casks/chromeless.rb
git commit -m "Update Chromeless to v5.0.0 with functional DMG"
git push origin main

# After pushing the changes, users can install Chromeless via Homebrew:
brew update
brew tap jonathanpberger/chromeless
brew install --cask chromeless

# For existing users to update:
brew update
brew upgrade --cask chromeless

# To verify the installation:
brew info --cask chromeless

# If you need to uninstall:
brew uninstall --cask chromeless